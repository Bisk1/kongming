{% extends "chinesetool/base.html"%}
{% load i18n %}
{% block content %}

<div id="new_lesson">
    {% trans "Add new lesson" %}
    <form action="{% url 'chinesetool:lessons_management'  %}" method="post">
    Lesson topic:
        {% csrf_token %}
        <input type="hidden" name="create" id="create" value="true"/>
        <input type="text" name="topic" id="topic"/>
        <input type="submit" value="Add">
    </form>
</div>


{% trans "Available lessons" %}
{% if lessons %}
    <table>
        <tr>
            <th>
                {% trans "Topic" %}
            </th>
            <th>
                {% trans "Requirements" %}
            </th>
            <th>
            </th>
            <th>
            </th>
        </tr>
        {% for lesson in lessons %}
            <tr>
                <td>
                    {{ lesson.topic }}
                </td>
                <td>
                    {% if lesson.requirements %}
                        {% for requirement in lesson.requirements.all %}
                        <div>
                            {{ requirement.topic }}
                        </div>
                        {% endfor %}
                    {% else %}
                    <div>
                        None
                    </div>
                    {% endif %}
                </td>
                <td>
                    <a href="{% url 'chinesetool:modify_lesson' lesson_id=lesson.id %}">{% trans "Modify" %}</a>
                </td>
                <td>
                    <form action="{% url 'chinesetool:lessons_management'  %}" method="post">
                        {% csrf_token %}
                        <input type="hidden" name="delete" id="delete" value="true"/>
                        <input type="hidden" name="lesson_id" id="lesson_id" value="{{ lesson.id }}"/>
                        <input type="submit" value="Delete">
                    </form>
                </td>
            </tr>
        {% endfor %}
    </table>
{% else %}
    No lessons available
{% endif %}
{% endblock %}